#!/usr/bin/env bash
set -e

read -rp "Install directory (leave blank to use current directory): " install_dir

# Expand ~ if present
install_dir="${install_dir/#\~/$HOME}"

# Default to current directory if empty
if [ -z "$install_dir" ]; then
    install_dir="$PWD"
    echo "Using current directory: $install_dir"
fi

# Create directory if missing
if [ ! -d "$install_dir" ]; then
    echo "Directory doesnâ€™t exist. Making it for you."
    mkdir -p "$install_dir"
fi

cd "$install_dir"

echo "Downloading files..."

wget -q https://github.com/NikoboiNFTB/GitHub-Tools/raw/refs/heads/main/shell/all-pull
chmod +x all-pull

wget -q https://github.com/NikoboiNFTB/GitHub-Tools/raw/refs/heads/main/shell/all-push
chmod +x all-push

wget -q https://github.com/NikoboiNFTB/GitHub-Tools/raw/refs/heads/main/shell/pull
chmod +x pull

wget -q https://github.com/NikoboiNFTB/GitHub-Tools/raw/refs/heads/main/shell/push
chmod +x push

echo "Files downloaded"

# Prompt for copying to home directory
read -rp "Copy the scripts to ~/ for quick access anywhere? [y/N]: " choice

case "$choice" in
    [yY])
        echo "Copying to home directory..."
        cp -f all-pull all-push "$HOME/"
        ;;
    *)
        echo "Skipping copy to home directory."
        ;;
esac

echo "All done!"
